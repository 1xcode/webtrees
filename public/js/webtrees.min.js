"use strict";var pastefield,webtrees=function(){var e=document.documentElement.lang;function t(e){return e.replace(/\s+/g," ").trim()}function a(e){return e.match(/[\u3400-\u9FCC]/)?"cjk":e.match(/[\u0370-\u03FF]/)?"greek":e.match(/[\u0400-\u04FF]/)?"cyrillic":e.match(/[\u0590-\u05FF]/)?"hebrew":e.match(/[\u0600-\u06FF]/)?"arabic":"latin"}return{buildNameFromParts:function(o,n,i,l,r,s){var d="cjk"===a(o+n+i+n+l+r),c=d?"":" ",u=d||-1!==["hu","jp","ko","vi","zh-Hans","zh-Hant"].indexOf(e),p=-1!==["is"].indexOf(e)?"":"/";o=t(o),n=t(n.replace(",",c)),i=t(i),l=function(t,a){return"pl"===e&&"F"===a?t.replace(/ski$/,"ska").replace(/cki$/,"cka").replace(/dzki$/,"dzka").replace(/żki$/,"żka"):t}(t(l.replace(",",c)),s),r=t(r);var h=t(i+c+l);return t(o+c+(u?p+h+p+c+n:n+c+p+h+p)+c+r)},detectScript:a}}();function expand_layer(e){return $("#"+e+"_img").toggleClass("icon-plus icon-minus"),$("#"+e).slideToggle("fast"),$("#"+e+"-alt").toggle(),!1}function addmedia_links(e,t,a){return pastefield=e,insertRowToTable(t,a),!1}function valid_date(e,t){var a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],o=e.value,n=o.split("("),i="";n.length>1&&(o=n[0],i=n[1]),(o=(o=(o=(o=(o=o.toUpperCase()).replace(/\s+/," ")).replace(/(^\s)|(\s$)/,"")).replace(/(\d)([A-Z])/,"$1 $2")).replace(/([A-Z])(\d)/,"$1 $2")).match(/^Q ([1-4]) (\d\d\d\d)$/)&&(o="BET "+a[3*RegExp.$1-3]+" "+RegExp.$2+" AND "+a[3*RegExp.$1-1]+" "+RegExp.$2),o.match(/^(@#DHIJRI@|HIJRI)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(o="@#DHIJRI@"+RegExp.$2+["MUHAR","SAFAR","RABIA","RABIT","JUMAA","JUMAT","RAJAB","SHAAB","RAMAD","SHAWW","DHUAQ","DHUAH"][parseInt(RegExp.$3,10)-1]+RegExp.$4),o.match(/^(@#DJALALI@|JALALI)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(o="@#DJALALI@"+RegExp.$2+["FARVA","ORDIB","KHORD","TIR","MORDA","SHAHR","MEHR","ABAN","AZAR","DEY","BAHMA","ESFAN"][parseInt(RegExp.$3,10)-1]+RegExp.$4),o.match(/^(@#DHEBREW@|HEBREW)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(o="@#DHEBREW@"+RegExp.$2+["TSH","CSH","KSL","TVT","SHV","ADR","ADS","NSN","IYR","SVN","TMZ","AAV","ELL"][parseInt(RegExp.$3,10)-1]+RegExp.$4),o.match(/^(@#DFRENCH R@|FRENCH)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(o="@#DFRENCH R@"+RegExp.$2+["VEND","BRUM","FRIM","NIVO","PLUV","VENT","GERM","FLOR","PRAI","MESS","THER","FRUC","COMP"][parseInt(RegExp.$3,10)-1]+RegExp.$4);if(/^([^\d]*)(\d+)[^\d](\d+)[^\d](\d+)$/i.exec(o)){var l=RegExp.$1,r=parseInt(RegExp.$2,10),s=parseInt(RegExp.$3,10),d=parseInt(RegExp.$4,10),c=(new Date).getFullYear(),u=c%100,p=c-u;"DMY"===t&&r<=31&&s<=12||r>13&&r<=31&&s<=12&&d>31?o=l+r+" "+a[s-1]+" "+(d>=100?d:d<=u?d+p:d+p-100):"MDY"===t&&r<=12&&s<=31||s>13&&s<=31&&r<=12&&d>31?o=l+s+" "+a[r-1]+" "+(d>=100?d:d<=u?d+p:d+p-100):("YMD"===t&&s<=12&&d<=31||d>13&&d<=31&&s<=12&&r>31)&&(o=l+d+" "+a[s-1]+" "+(r>=100?r:r<=u?r+p:r+p-100))}o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/^[>]([\w ]+)$/,"AFT $1")).replace(/^[<]([\w ]+)$/,"BEF $1")).replace(/^([\w ]+)[-]$/,"FROM $1")).replace(/^[-]([\w ]+)$/,"TO $1")).replace(/^[~]([\w ]+)$/,"ABT $1")).replace(/^[*]([\w ]+)$/,"EST $1")).replace(/^[#]([\w ]+)$/,"CAL $1")).replace(/^([\w ]+) ?- ?([\w ]+)$/,"BET $1 AND $2")).replace(/^([\w ]+) ?~ ?([\w ]+)$/,"FROM $1 TO $2")).replace(/(JANUARY)/,"JAN")).replace(/(FEBRUARY)/,"FEB")).replace(/(MARCH)/,"MAR")).replace(/(APRIL)/,"APR")).replace(/(MAY)/,"MAY")).replace(/(JUNE)/,"JUN")).replace(/(JULY)/,"JUL")).replace(/(AUGUST)/,"AUG")).replace(/(SEPTEMBER)/,"SEP")).replace(/(OCTOBER)/,"OCT")).replace(/(NOVEMBER)/,"NOV")).replace(/(DECEMBER)/,"DEC")).replace(/(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\.? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3")).replace(/(^| )(\d [A-Z]{3,5} \d{4})/,"$10$2"),i&&(o=o+" ("+i),e.value!==o&&(e.value=o)}var monthLabels=[];monthLabels[1]="January",monthLabels[2]="February",monthLabels[3]="March",monthLabels[4]="April",monthLabels[5]="May",monthLabels[6]="June",monthLabels[7]="July",monthLabels[8]="August",monthLabels[9]="September",monthLabels[10]="October",monthLabels[11]="November",monthLabels[12]="December";var monthShort=[];monthShort[1]="JAN",monthShort[2]="FEB",monthShort[3]="MAR",monthShort[4]="APR",monthShort[5]="MAY",monthShort[6]="JUN",monthShort[7]="JUL",monthShort[8]="AUG",monthShort[9]="SEP",monthShort[10]="OCT",monthShort[11]="NOV",monthShort[12]="DEC";var daysOfWeek=[];daysOfWeek[0]="S",daysOfWeek[1]="M",daysOfWeek[2]="T",daysOfWeek[3]="W",daysOfWeek[4]="T",daysOfWeek[5]="F",daysOfWeek[6]="S";var weekStart=0;function cal_setMonthNames(e,t,a,o,n,i,l,r,s,d,c,u){monthLabels[1]=e,monthLabels[2]=t,monthLabels[3]=a,monthLabels[4]=o,monthLabels[5]=n,monthLabels[6]=i,monthLabels[7]=l,monthLabels[8]=r,monthLabels[9]=s,monthLabels[10]=d,monthLabels[11]=c,monthLabels[12]=u}function cal_setDayHeaders(e,t,a,o,n,i,l){daysOfWeek[0]=e,daysOfWeek[1]=t,daysOfWeek[2]=a,daysOfWeek[3]=o,daysOfWeek[4]=n,daysOfWeek[5]=i,daysOfWeek[6]=l}function cal_setWeekStart(e){e>=0&&e<7&&(weekStart=e)}function calendarWidget(e,t){var a=document.getElementById(e),o=document.getElementById(t);if("visible"===a.style.visibility)return a.style.visibility="hidden",!1;if("show"===a.style.visibility)return a.style.visibility="hide",!1;var n;return n=/((\d+ (JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC) )?\d+)/i.exec(o.value)?new Date(RegExp.$1):new Date,a.innerHTML=cal_generateSelectorContent(t,e,n),"hidden"===a.style.visibility?(a.style.visibility="visible",!1):"hide"===a.style.visibility&&(a.style.visibility="show",!1)}function cal_generateSelectorContent(e,t,a){var o,n,i='<table border="1"><tr>';for(i+='<td><select class="form-control" id="'+e+'_daySelect" onchange="return cal_updateCalendar(\''+e+"', '"+t+"');\">",o=1;o<32;o++)i+='<option value="'+o+'"',a.getDate()===o&&(i+=' selected="selected"'),i+=">"+o+"</option>";for(i+="</select></td>",i+='<td><select class="form-control" id="'+e+'_monSelect" onchange="return cal_updateCalendar(\''+e+"', '"+t+"');\">",o=1;o<13;o++)i+='<option value="'+o+'"',a.getMonth()+1===o&&(i+=' selected="selected"'),i+=">"+monthLabels[o]+"</option>";for(i+="</select></td>",i+='<td><input class="form-control" type="text" id="'+e+'_yearInput" size="5" value="'+a.getFullYear()+'" onchange="return cal_updateCalendar(\''+e+"', '"+t+"');\" /></td></tr>",i+='<tr><td colspan="3">',i+='<table width="100%">',i+="<tr>",n=weekStart,o=0;o<7;o++)i+="<td ",i+='class="descriptionbox"',i+=">",i+=daysOfWeek[n],i+="</td>",++n>6&&(n=0);i+="</tr>";var l=new Date(a.getFullYear(),a.getMonth(),1),r=l.getDay();r-=weekStart;for(l=l.getTime()-864e5*r+432e5,l=new Date(l),n=0;n<6;n++){for(i+="<tr>",o=0;o<7;o++){i+="<td ",l.getMonth()===a.getMonth()?l.getDate()===a.getDate()?i+='class="descriptionbox"':i+='class="optionbox"':i+='style="background-color:#EAEAEA; border: solid #AAAAAA 1px;"',i+='><a href="#" onclick="return cal_dateClicked(\''+e+"', '"+t+"', "+l.getFullYear()+", "+l.getMonth()+", "+l.getDate()+');">',i+=l.getDate(),i+="</a></td>";var s=l.getTime()+864e5;l=new Date(s)}i+="</tr>"}return i+="</table>",i+="</td></tr>",i+="</table>"}function cal_setDateField(e,t,a,o){var n=document.getElementById(e);return!!n&&(o<10&&(o="0"+o),n.value=o+" "+monthShort[a+1]+" "+t,!1)}function cal_updateCalendar(e,t){var a=document.getElementById(e+"_daySelect");if(!a)return!1;var o=document.getElementById(e+"_monSelect");if(!o)return!1;var n=document.getElementById(e+"_yearInput");if(!n)return!1;var i=parseInt(o.options[o.selectedIndex].value,10);i-=1;var l=new Date(n.value,i,a.options[a.selectedIndex].value);cal_setDateField(e,l.getFullYear(),l.getMonth(),l.getDate());var r=document.getElementById(t);return r?(r.innerHTML=cal_generateSelectorContent(e,t,l),!1):(alert("no dateDiv "+t),!1)}function cal_dateClicked(e,t,a,o,n){return cal_setDateField(e,a,o,n),calendarWidget(t,e),!1}function openerpasteid(e){window.opener.paste_id&&window.opener.paste_id(e),window.close()}function paste_id(e){pastefield.value=e}function pastename(e){nameElement&&(nameElement.innerHTML=e),remElement&&(remElement.style.display="block")}function paste_char(e){document.selection?(pastefield.focus(),document.selection.createRange().text=e):pastefield.selectionStart||0===pastefield.selectionStart?(pastefield.value=pastefield.value.substring(0,pastefield.selectionStart)+e+pastefield.value.substring(pastefield.selectionEnd,pastefield.value.length),pastefield.selectionStart=pastefield.selectionEnd=pastefield.selectionStart+e.length):pastefield.value+=e,"NPFX"!==pastefield.id&&"GIVN"!==pastefield.id&&"SPFX"!==pastefield.id&&"SURN"!==pastefield.id&&"NSFX"!==pastefield.id||updatewholename()}function persistent_toggle(e){var t=document.getElementById(e),a="state-of-"+e;"true"===localStorage.getItem(a)&&$(t).click(),$(t).on("change",function(){localStorage.setItem(a,t.checked)})}function valid_lati_long(e,t,a){var o=e.value.toUpperCase();(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/(^\s*)|(\s*$)/g,"")).replace(/ /g,":")).replace(/\+/g,"")).replace(/-/g,a)).replace(/,/g,".")).replace(/\u00b0/g,":")).replace(/\u0027/g,":")).replace(/^([0-9]+):([0-9]+):([0-9.]+)(.*)/g,function(e,t,a,o,n){var i=parseFloat(t);return i+=a/60,i+=o/3600,n+(i=Math.round(1e4*i)/1e4)})).replace(/^([0-9]+):([0-9]+)(.*)/g,function(e,t,a,o){var n=parseFloat(t);return n+=a/60,o+(n=Math.round(1e4*n)/1e4)})).replace(/(.*)([N|S|E|W]+)$/g,"$2$1"))&&o.charAt(0)!==a&&o.charAt(0)!==t&&(o=t+o),e.value=o}function activate_colorbox(e){$.extend($.colorbox.settings,{fixed:!0,current:"",previous:"",next:"",slideshowStart:"",slideshowStop:"",close:""}),e&&$.extend($.colorbox.settings,e),$("body").on("click","a.gallery",function(){$("a[type^=image].gallery").colorbox({photo:!0,maxWidth:"95%",maxHeight:"95%",rel:"gallery",slideshow:!0,slideshowAuto:!1,onComplete:function(){$(".cboxPhoto").unbind("click"),wheelzoom(document.querySelectorAll(".cboxPhoto"))}})})}function autocomplete(e){$(e).each(function(){var e=this;$(this).typeahead(null,{display:"value",source:new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:this.dataset.autocompleteUrl,replace:function(t,a){if(e.dataset.autocompleteExtra){var o=$(document.querySelector(e.dataset.autocompleteExtra)).val();return t.replace("QUERY",a)+"&extra="+encodeURIComponent(o)}return t.replace("QUERY",a)},wildcard:"QUERY"}})})})}function insertTextAtCursor(e,t){var a=e.scrollTop,o=e.selectionStart,n=e.value.substring(0,o),i=e.value.substring(e.selectionEnd,e.value.length);e.value=n+t+i,e.selectionStart=o+t.length,e.selectionEnd=e.selectionStart,e.focus(),e.scrollTop=a}function drawPieChart(e,t,a,o,n){t=google.visualization.arrayToDataTable(t);var i={title:o,height:"100%",width:"100%",pieStartAngle:0,pieSliceText:"none",pieSliceTextStyle:{color:"#777"},pieHole:.4,legend:{alignment:"center",labeledValueText:n||"value",position:"labeled"},chartArea:{left:0,top:"5%",height:"90%",width:"100%"},tooltip:{trigger:"none",text:"both"},backgroundColor:"transparent",colors:a};new google.visualization.PieChart(document.getElementById(e)).draw(t,i)}function drawColumnChart(e,t,a){a=Object.assign({title:"",subtitle:"",titleTextStyle:{color:"#757575",fontName:"Roboto",fontSize:"16px",bold:!1,italic:!1},height:"100%",width:"100%",vAxis:{title:""},hAxis:{title:""},legend:{position:"none"},backgroundColor:"transparent"},a);var o=new google.visualization.ColumnChart(document.getElementById(e));t=google.visualization.arrayToDataTable(t);o.draw(t,a)}function drawComboChart(e,t,a){a=Object.assign({title:"",subtitle:"",titleTextStyle:{color:"#757575",fontName:"Roboto",fontSize:"16px",bold:!1,italic:!1},height:"100%",width:"100%",vAxis:{title:""},hAxis:{title:""},legend:{position:"none"},seriesType:"bars",series:{2:{type:"line"}},colors:[],backgroundColor:"transparent"},a);var o=new google.visualization.ComboChart(document.getElementById(e));t=google.visualization.arrayToDataTable(t);o.draw(t,a)}function drawGeoChart(e,t,a){a=Object.assign({title:"",subtitle:"",height:"100%",width:"100%"},a);var o=new google.visualization.GeoChart(document.getElementById(e));t=google.visualization.arrayToDataTable(t);o.draw(t,a)}function TreeViewHandler(e,t){var a=this;this.treeview=$("#"+e+"_in"),this.loadingImage=$("#"+e+"_loading"),this.toolbox=$("#tv_tools"),this.buttons=$(".tv_button:first",this.toolbox),this.zoom=100,this.boxWidth=180,this.boxExpandedWidth=250,this.cookieDays=3,this.ajaxUrl1="index.php?route=/module/tree/",this.ajaxUrl2="&ged="+encodeURIComponent(t)+"&instance="+e,this.container=this.treeview.parent(),this.auto_box_width=!1,this.updating=!1,"true"===readCookie("compact")&&a.compact(),function(e){e.fn.drags=function(t){return this.css("cursor","move").on("mousedown",function(t){var o=e(this),n=o.outerHeight(),i=o.outerWidth(),l=o.offset().top+n-t.pageY,r=o.offset().left+i-t.pageX;o.addClass("draggable"),e(document).on("mousemove",function(t){e(".draggable").offset({top:t.pageY+l-n,left:t.pageX+r-i}).on("mouseup",function(){o.removeClass("draggable")})}).on("mouseup",function(){o.removeClass("draggable"),a.updateTree()}),t.preventDefault()})}}(jQuery),a.treeview.drags(),a.toolbox.find("#tvbCompact").each(function(e,t){t.onclick=function(){a.compact()}}),a.toolbox.find("#tvbAllPartners").each(function(e,t){t.onclick=function(){createCookie("allPartners","true"===readCookie("allPartners")?"false":"true",a.cookieDays),document.location=document.location}}),a.toolbox.find("#tvbOpen").each(function(e,t){var o=$(t,a.toolbox);t.onclick=function(){o.addClass("tvPressed"),a.setLoading();var e=jQuery.Event("click");a.treeview.find(".tv_box:not(.boxExpanded)").each(function(t,o){var n=$(o,a.treeview).offset();n.left>=a.leftMin&&n.left<=a.leftMax&&n.top>=a.topMin&&n.top<=a.topMax&&a.expandBox(o,e)}),o.removeClass("tvPressed"),a.setComplete()}}),a.toolbox.find("#tvbClose").each(function(e,t){var o=$(t,a.toolbox);t.onclick=function(){o.addClass("tvPressed"),a.setLoading(),a.treeview.find(".tv_box.boxExpanded").each(function(e,t){$(t).css("display","none").removeClass("boxExpanded").parent().find(".tv_box.collapsedContent").css("display","block")}),o.removeClass("tvPressed"),a.setComplete()}}),a.centerOnRoot()}function createCookie(e,t,a){if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),document.cookie=e+"="+t+"; expires="+o.toGMTString()+"; path=/"}else document.cookie=e+"="+t+"; path=/"}function readCookie(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var n=a[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("meta[name=csrf]").attr("content")}}),$(function(){$("[data-ajax-url]").each(function(){$(this).load($(this).data("ajaxUrl"))}),autocomplete("input[data-autocomplete-url]");var e,t=document.documentElement.lang;$("select.select2").select2({language:{"zh-Hans":"zh-CN","zh-Hant":"zh-TW"}[t]||t,width:"90%",escapeMarkup:function(e){return e}}).on("select2:unselect",function(e){$(e.delegateTarget).html('<option value="" selected></option>')}),$.fn.dataTableExt.oSort["text-asc"]=function(e,t){return e.localeCompare(t,document.documentElement.lang,{sensitivity:"base"})},$.fn.dataTableExt.oSort["text-desc"]=function(e,t){return t.localeCompare(e,document.documentElement.lang,{sensitivity:"base"})},$("table.datatables").each(function(){$(this).DataTable(),$(this).removeClass("d-none")}),$(".wt-osk-trigger").click(function(){(e=document.getElementById($(this).data("id"))).focus(),$(".wt-osk").show()}),$(".wt-osk-script-button").change(function(){$(".wt-osk-script").prop("hidden",!0),$(".wt-osk-script-"+$(this).data("script")).prop("hidden",!1)}),$(".wt-osk-shift-button").click(function(){document.querySelector(".wt-osk-keys").classList.toggle("shifted")}),$(".wt-osk-keys").on("click",".wt-osk-key",function(){var t=$(this).contents().get(0).nodeValue,a=$(".wt-osk-shift-button").hasClass("active"),o=$("sup",this)[0];if(a&&void 0!==o&&(t=o.innerText),null!==e){var n=e.selectionStart,i=e.value,l=i.substring(0,n),r=i.substring(n,i.length);e.value=l+t+r,!1===$(".wt-osk-pin-button").hasClass("active")&&$(".wt-osk").hide()}}),$(".wt-osk-close").on("click",function(){$(".wt-osk").hide()})}),document.addEventListener("click",function(e){var t=e.target.closest("a");if(null!==t)if("confirm"in t.dataset&&!confirm(t.dataset.confirm))e.preventDefault();else if("postUrl"in t.dataset){var a=new XMLHttpRequest,o=document.querySelector("meta[name=csrf]").content;a.open("POST",t.dataset.postUrl,!0),a.setRequestHeader("X-CSRF-TOKEN",o),a.onreadystatechange=function(){a.readyState===a.DONE&&document.location.reload()},a.send(),e.preventDefault()}}),TreeViewHandler.prototype.setLoading=function(){this.treeview.css("cursor","wait"),this.loadingImage.css("display","block")},TreeViewHandler.prototype.setComplete=function(){this.treeview.css("cursor","move"),this.loadingImage.css("display","none")},TreeViewHandler.prototype.getSize=function(){var e=this,t=e.container.parent(),a=t.offset();e.leftMin=a.left,e.leftMax=e.leftMin+t.innerWidth(),e.topMin=a.top,e.topMax=e.topMin+t.innerHeight()},TreeViewHandler.prototype.updateTree=function(e,t){var a=this,o=[],n=[];return this.getSize(),a.treeview.find("td[abbr]").each(function(e,t){var i=(t=$(t,a.treeview)).offset();i.left>=a.leftMin&&i.left<=a.leftMax&&i.top>=a.topMin&&i.top<=a.topMax&&(o.push(t.attr("abbr")),n.push(t))}),o.length>0?(a.updating=!0,a.setLoading(),jQuery.ajax({url:a.ajaxUrl1+"Persons"+a.ajaxUrl2,dataType:"json",data:"q="+o.join(";"),success:function(e){for(var t=n.length,o=($(".rootPerson",this.treeview).offset().left,0);o<t;o++)n[o].removeAttr("abbr").html(e[o]);a.getSize()},complete:function(){a.treeview.find("td[abbr]").length&&a.updateTree(e,t),a.auto_box_width&&a.treeview.find(".tv_box").css("width","auto"),a.updating=!0,e&&a.centerOnRoot(),t&&t.removeClass("tvPressed"),a.setComplete(),a.updating=!1},timeout:function(){t&&t.removeClass("tvPressed"),a.updating=!1,a.setComplete()}})):(t&&t.removeClass("tvPressed"),a.setComplete()),!1},TreeViewHandler.prototype.compact=function(){var e=this,t=$("#tvbCompact",e.toolbox);if(e.setLoading(),e.auto_box_width){var a=e.boxWidth*(e.zoom/100)+"px",o=e.boxExpandedWidth*(e.zoom/100)+"px";e.treeview.find(".tv_box:not(boxExpanded)",e.treeview).css("width",a),e.treeview.find(".boxExpanded",e.treeview).css("width",o),e.auto_box_width=!1,readCookie("compact")&&createCookie("compact",!1,e.cookieDays),t.removeClass("tvPressed")}else e.treeview.find(".tv_box").css("width","auto"),e.auto_box_width=!0,readCookie("compact")||createCookie("compact",!0,e.cookieDays),e.updating||e.updateTree(),t.addClass("tvPressed");return e.setComplete(),!1},TreeViewHandler.prototype.centerOnRoot=function(){this.loadingImage.css("display","block");var e=this.container,t=e.innerWidth()/2;if(isNaN(t))return!1;e.innerHeight(),$(".rootPerson",this.treeview);return this.updating||this.setComplete(),!1},TreeViewHandler.prototype.expandBox=function(e,t){if($(t.target).hasClass("tv_link"))return!1;var a,o,n=(e=$(e,this.treeview)).parent(),i=e.attr("abbr"),l=this;if(n.hasClass("detailsLoaded"))o=n.find(".collapsedContent"),a=n.find(".tv_box:not(.collapsedContent)");else{a=e,o=e.clone(),n.append(o.addClass("collapsedContent").css("display","none"));var r=this.loadingImage.find("img").clone().addClass("tv_box_loading").css("display","block");e.prepend(r),l.updating=!0,l.setLoading(),e.load(l.ajaxUrl1+"Details&pid="+i+l.ajaxUrl2,function(){"function"==typeof CB_Init&&CB_Init(),e.css("width",l.boxExpandedWidth*(l.zoom/100)+"px"),r.remove(),n.addClass("detailsLoaded"),l.setComplete(),l.updating=!1})}return e.hasClass("boxExpanded")?(a.css("display","none"),o.css("display","block"),e.removeClass("boxExpanded")):(a.css("display","block"),o.css("display","none"),a.addClass("boxExpanded")),this.getSize(),!1};
